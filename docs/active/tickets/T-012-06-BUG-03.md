---
id: T-012-06-BUG-03
story: S-012
title: slope-adhesion-fails-at-byte-angle-35
type: bug
status: open
priority: medium
phase: done
depends_on: []
---

## Summary

Player loses ground contact on slopes at byte angle >= 35 (~49°). At these angles,
on_ground is only maintained ~50% of frames in the slope region, well below the expected
80% threshold. The player oscillates between on_ground and airborne while traversing the
slope.

## Reproduction

```python
from speednik.grids import build_slope
from speednik.simulation import create_sim_from_lookup, sim_step
from speednik.physics import InputState

_, lookup = build_slope(approach_tiles=5, slope_tiles=15, angle=35, ground_row=20)
sim = create_sim_from_lookup(lookup, 48.0, 300.0)
# Hold right for 300 frames
# In slope region (x=80 to x=320): on_ground only 131/264 frames (50%)
```

Tested angles and on_ground ratios in slope region:
- angle=0:  100% (pass)
- angle=5:  100% (pass)
- angle=10: 100% (pass)
- angle=15: 100% (pass)
- angle=20: 100% (pass)
- angle=25: 100% (pass)
- angle=30: 100% (pass)
- angle=35:  50% (FAIL)
- angle=40:  52% (FAIL)
- angle=45:  55% (FAIL)

The adhesion limit is between byte angle 30 (~42°) and 35 (~49°).

## Analysis

The SLIP_ANGLE_THRESHOLD is 33 byte-angles (~46°), which is in the failing range. At
angles above this, the slip system activates and the player may detach from the surface.
Additionally, the `build_slope` height array computation using `_slope_height_array` may
produce discontinuities at steep angles, causing the floor sensor to intermittently lose
contact.

Possible causes:
- Slip system correctly detaching the player at steep angles (by design, not a bug?)
- Height array discontinuities at tile boundaries for steep angles
- Floor sensor unable to track rapidly changing heights at steep angles

## Impact

Slopes steeper than ~49° (byte angle 35) are unreliable for ground-based gameplay.
Any stage feature requiring the player to walk on surfaces steeper than this will
experience intermittent ground detachment. This sets an effective slope limit for the
engine at ~49°.
