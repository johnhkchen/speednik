---
id: T-003-04
story: S-003
title: egg-piston-boss
type: task
status: open
priority: high
phase: done
depends_on: [T-003-03]
---

## Context

Implement the Stage 3 boss — Egg Piston. A state-machine boss that requires spindash timing to defeat.

Reference: docs/specification.md section 7.3 (boss specification)

## Acceptance Criteria

- [ ] Boss state machine with 4 states:
  - IDLE (2.0s): hover at top of arena, slow left/right movement
  - DESCEND (1.0s): drop to ground level at a predictable position. Targeting indicator on ground appears 1s before impact.
  - VULNERABLE (1.5s → 1.0s after 4 hits): sits on ground, cockpit exposed
  - ASCEND (1.0s): rises back up. Damages player if underneath.
- [ ] Damage: only spindash (ground_speed >= 8) deals damage. Regular jumps on top bounce off armor. Triggers SFX slot 11 on hit.
- [ ] HP: 8 hits total.
- [ ] Escalation at 4 hits: VULNERABLE window shrinks to 1.0s, IDLE movement speed doubles.
- [ ] Targeting indicator: visual cue on the ground where the boss will land, gives player time to position and charge spindash.
- [ ] Boss defeat triggers stage clear sequence (SFX slot 10).
- [ ] Unit tests for: state transitions, damage only from spindash, escalation trigger at 4 hits, invulnerability during non-VULNERABLE states
