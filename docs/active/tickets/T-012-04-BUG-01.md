---
id: T-012-04-BUG-01
story: S-012
title: skybridge-bottomless-pit-at-x170
type: bug
status: open
priority: critical
phase: done
depends_on: []
---

## Finding

All 6 player archetypes fall into a bottomless pit at x≈170 in Skybridge Gauntlet.
Tile column 11 (px 176-192) in rows 31-32 has no collision data, creating a gap in
the walking surface. The player falls below the world and never dies — the simulation
has no death trigger for falling below `level_height`. The player continues moving
horizontally while falling indefinitely, reaching max_x=5200 (level boundary) but
never triggering goal or death.

## Evidence

- Frame 339: walker on_ground=True at x=169.5, y=480.0 (tile 10, last solid tile)
- Frame 340: walker at x=169.5, y=483.8, state=jumping (fell off edge)
- Frame 391+: y exceeds level_height+64 (960), triggering position_y_below_world errors
- Walker accumulates 11,197 invariant errors (position_y_below_world + velocity_y_exceeds_max)
- All 6 archetypes: max_x=5200 (except chaos: 2415), deaths=0, goal=False
- No archetype reaches the goal despite traversing the full level width below ground

## Expected

Either:
1. Tile column 11 should have solid collision data (closing the gap), or
2. The simulation should kill the player when y exceeds level_height (death pit), or
3. A spring/recovery mechanism should exist below the gap

The stage has springs at x=304, 440, 592 (y=608) to catch falls at LATER gaps, but
tile column 11 (px 176-192) has no recovery mechanism.

## Reproduction

```python
from speednik.qa import run_audit, format_findings, BehaviorExpectation, make_walker

exp = BehaviorExpectation(
    name="skybridge_walker", stage="skybridge", archetype="walker",
    min_x_progress=2500, max_deaths=2, require_goal=False,
    max_frames=6000, invariant_errors_ok=0,
)
findings, result = run_audit("skybridge", make_walker(), exp)
print(f"max_x={result.sim.max_x_reached:.1f} deaths={result.sim.deaths}")
print(f"goal={result.sim.goal_reached} errors={len([v for v in result.violations if v.severity == 'error'])}")
# Output: max_x=5200.0 deaths=0 goal=False errors=11197
```

## Probable cause

Two compounding issues:

1. **Missing collision tile**: Skybridge collision data has a gap at tile column 11
   (rows 31+). Adjacent columns 10 and 12 have solid tiles. This 16px gap is the
   first pit on the stage and has no spring or recovery mechanism below it.

2. **No pit death mechanism**: `sim_step()` does not kill the player for falling
   below `level_height`. The death guard (line 224) only checks `PlayerState.DEAD`,
   which is only set by `damage_player()` (hit with 0 rings). There is no
   out-of-bounds death trigger. The boundary clamp (line 241) only handles x, not y.
