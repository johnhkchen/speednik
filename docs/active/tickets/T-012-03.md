---
id: T-012-03
story: S-012
title: pipeworks-behavior-audit
type: task
status: open
priority: high
phase: done
depends_on: [T-012-01]
---

## Context

Run all 6 player archetypes through Pipe Works and document every finding. Pipeworks is the
intermediate stage — it has gaps, pipes, liquid zones, and more vertical terrain. Players
are expected to die occasionally, but the level should be completable.

### Your role

You are a QA auditor. Document findings. Do not adjust expectations to match current
behavior.

### Expected behaviors for Pipeworks

| Archetype    | min_x   | max_deaths | goal? | rationale                                 |
|--------------|---------|------------|-------|-------------------------------------------|
| Walker       | 3000    | 2          | no    | Gaps will stop a non-jumper                |
| Jumper       | 5400    | 1          | yes   | Jumping clears gaps, should finish         |
| Speed Demon  | 5400    | 1          | yes   | Spindash momentum clears most obstacles    |
| Cautious     | 1500    | 1          | no    | Slow, gaps are dangerous                   |
| Wall Hugger  | 2000    | 2          | no    | Walls + gaps = slow progress               |
| Chaos        | 800     | 3          | no    | Random input, hostile terrain              |

Pipeworks is harder. Deaths are expected for some archetypes. The min_x thresholds are
"how far should a player of this type get before the level fairly stops them."

A Walker dying at a gap is **expected** — that's game design. A Walker getting stuck at a
wall before any gap is a **bug**.

### Process

Same as T-012-02:
1. Run each archetype via `run_audit("pipeworks", ...)`
2. Distinguish expected failures (gap death for Walker) from bugs (wall collision, clipping)
3. xfail real bugs, file bug tickets
4. Document expected behaviors in test comments

### Stage features to watch

- **Gaps**: Walker should reach the first gap and die there (not before). Jumper/Speed Demon
  should clear them.
- **Pipes**: if any archetype triggers pipe travel, verify they exit correctly.
- **Liquid zones**: rising liquid should damage the player. Verify it's reachable and
  functions.
- **Vertical terrain**: Pipeworks has more elevation changes. Watch for slope collision bugs.

### Location

`tests/test_audit_pipeworks.py`
Bug tickets in `docs/active/tickets/T-012-03-BUG-*.md`

## Acceptance Criteria

- [ ] 6 archetype tests for pipeworks
- [ ] Expectations distinguish "fair death" from "bug death"
- [ ] Gap deaths for Walker/Cautious/Chaos documented as expected, not xfailed
- [ ] Real bugs (wall collisions, clipping, stuck states) xfailed with tickets
- [ ] Bug tickets created for each real finding
- [ ] `uv run pytest tests/test_audit_pipeworks.py -v` runs clean
