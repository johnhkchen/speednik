---
id: T-007-04
story: S-007
title: regenerate-hillside-verify-loop
type: task
status: open
priority: critical
phase: done
depends_on: [T-007-01, T-007-02]
---

## Context

After T-007-01 (ramp generation in svg2stage) and T-007-02 (loop tile wall exemption in
physics), regenerate the hillside stage data and verify the loop is traversable end-to-end.

This ticket is the integration verification step. It catches any issues that unit tests in
the individual tickets might miss: ramp-to-loop tile seams, angle continuity across the
transition, ground fill gaps beneath ramps, and actual in-game traversal.

### Steps

1. Regenerate hillside stage data:
   ```
   uv run python tools/svg2stage.py stages/hillside_rush.svg speednik/stages/hillside/
   ```

2. Check validation report for issues in the loop region (tile columns around x=200-240,
   expanded to include ramp tiles):
   - Zero "Impassable gap" errors at ramp entry, ramp-to-loop junction, loop-to-ramp junction,
     and ramp exit
   - Zero "Accidental wall" errors in the ramp region
   - Angle consistency across ramp → loop → ramp should have no large jumps

3. Inspect generated tile data:
   - Ramp tiles exist to the left and right of the loop circle
   - Ramp tile angles progress smoothly (no jumps > 10 in the 256-step system)
   - Loop tiles unchanged from previous generation (same count, same angles)
   - Ground fill is continuous beneath ramps (no blue gaps visible)

4. Run the game and verify:
   - Player can approach the loop from the left at running speed
   - Player enters the loop, traverses the full 360°, and exits on the right
   - Player is not stopped or pushed back by wall sensors at any point during traversal
   - Rings inside the loop are collectible during traversal

## Acceptance Criteria

- [ ] `uv run python tools/svg2stage.py stages/hillside_rush.svg speednik/stages/hillside/`
  completes without errors
- [ ] Validation report shows zero "Impassable gap" errors in the loop+ramp region
- [ ] Ramp tiles visible in `tile_map.json` with smooth angle progression
- [ ] `uv run pytest -x` — all tests pass
- [ ] Manual playtest: player traverses the loop at running speed without getting stuck
