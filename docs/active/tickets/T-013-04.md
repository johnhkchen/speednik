---
id: T-013-04
story: S-013
title: solid-tile-push-out-hardening
type: bug
status: open
priority: high
phase: done
depends_on: []
---

## Context

Players clip into solid tiles in Pipeworks, entering a bounce oscillation they can't escape.
Walker and Wall Hugger get trapped at x≈3040 (150 invariant errors). Chaos clips into tiles
at x≈100 (8 errors). The collision resolution system fails when the player enters regions
with dense FULL-solidity tiles (angle=64 walls adjacent to angle=128 ceilings).

Addresses: T-012-03-BUG-02, T-012-03-BUG-03.

## Root cause

When the player lands or moves into a region where multiple adjacent tiles are fully solid,
`find_wall_push` and floor sensor resolution conflict. The player gets placed inside a solid
tile, then the next frame's collision response pushes them into another solid tile. The
physics oscillates without converging to a valid non-solid position.

The specific failure at x≈3040:
- Tiles (190,40–41) are angle=64 (wall), solidity=FULL
- Tiles (191–195,41) are angle=128 (ceiling), solidity=FULL
- Player falls from above and lands inside the solid region
- Collision cannot find a valid ejection direction

## Requirements

1. Add a solid-tile escape mechanism: when the player is detected inside a fully solid
   tile after collision resolution, push them to the nearest non-solid tile boundary
   (check up, left, right in priority order).

2. If no valid non-solid position is found within a reasonable search radius (e.g., 3 tiles),
   treat it as a crush/death.

3. The fix must be in the physics/collision layer, not stage-specific. It should handle
   any dense-solid region on any stage.

4. Verify against both Pipeworks clipping zones (x≈3040 and x≈100).

## Acceptance Criteria

- Zero `inside_solid_tile` invariant errors on Pipeworks walker run (3600 frames)
- Zero `inside_solid_tile` invariant errors on Pipeworks chaos (seed=42) run
- Player is never trapped in a bounce oscillation for more than 3 consecutive frames
- No regressions on Hillside or Skybridge audits
