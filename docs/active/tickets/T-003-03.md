---
id: T-003-03
story: S-003
title: enemy-types
type: task
status: open
priority: high
phase: done
depends_on: [T-003-01]
---

## Context

Implement the four enemy types used across all three stages. Enemies interact with the ring/damage system from T-003-01.

Reference: docs/specification.md sections 5.3, 7.1–7.3

## Acceptance Criteria

- [ ] **Base enemy behavior:**
  - Player jumping/rolling on top → enemy destroyed, player bounces upward (y_vel set to jump-like value), triggers SFX slot 4
  - Player touching enemy from side/below while not rolling → player takes damage
  - Player spindashing through enemy (rolling + ground_speed >= threshold) → enemy destroyed, no bounce, player continues
  - Destroyed enemies produce a brief particle effect
- [ ] **Crab:** Walks back and forth on a short patrol (64px range). Reverses at patrol edges. 2-frame walk animation.
- [ ] **Buzzer:** Hovers in place at a fixed position. No patrol. Acts as a stationary aerial obstacle.
- [ ] **Chopper:** Positioned at a y-coordinate (liquid surface). Jumps vertically upward periodically (every ~90 frames), reaches a fixed height, falls back. Dangerous during jump.
- [ ] **Guardian (Stage 3 mini-boss):** Large shielded enemy on a bridge. Cannot be damaged from front. Spindash at ground_speed >= 8 breaks through shield and destroys it. Otherwise blocks player passage.
- [ ] Enemy bounce physics: on destroying enemy from above, player y_vel is set to a consistent upward value that enables reaching the next platform (as designed in Stage 3 rhythm loops)
- [ ] All enemies loaded from entities.json with type determining behavior
- [ ] Unit tests for: bounce on enemy, damage from side contact, spindash kill, guardian shield break
