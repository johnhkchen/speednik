---
id: T-004-04
story: S-004
title: integration-and-full-game-loop
type: task
status: open
priority: high
phase: done
depends_on: [T-004-03]
---

## Context

Final integration â€” wire everything together into a complete, playable game. Load levels from pipeline output, connect all systems, verify the full experience from title to credits.

Reference: docs/specification.md (all sections)

## Acceptance Criteria

- [ ] `level.py` loads stage data from pipeline output (tile_map.json, collision.json, entities.json, meta.json) and constructs the runtime level representation
- [ ] All three stages playable start to finish:
  - Stage 1: flat ground, slopes, half-pipes, loop, goal
  - Stage 2: three routes, launch pipes, liquid rise, goal
  - Stage 3: rhythm loops, guardian, Egg Piston boss, stage clear
- [ ] Player can die, respawn from checkpoint, lose all lives, see game over
- [ ] 100 rings grants extra life
- [ ] Camera tracks player correctly across all stage geometries including loops
- [ ] Audio plays correctly: stage music, SFX on actions, boss music on boss fight, clear jingle on goal
- [ ] No physics bugs: player doesn't clip through floors at speed, loops work, spindash launches correctly
- [ ] Palette swaps per stage (terrain colors change)
- [ ] Game runs at stable 60fps throughout all stages
- [ ] `uv run python -m speednik.main` launches the complete game
